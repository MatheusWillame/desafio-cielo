<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />

<div class="container">
    <div class="col-md">
        <div class="row ">
            <div class="col-xl-3 col-lg-6">
                <div class="card l-bg-cherry">
                    <div class="card-statistic-3 p-4">
                        <div class="card-icon card-icon-large"><i class="fas fa-shopping-cart"></i></div>
                        <div class="mb-4">
                            <h5 class="card-title mb-0">Transações</h5>
                        </div>
                        <div class="row align-items-center mb-2 d-flex">
                            <div class="col-8">
                                <h2 class="d-flex align-items-center mb-0">
                                    {{numTransacoes}}
                                </h2>
                            </div>
                            <div class="col-4 text-right">
                                <span>12.5% <i class="fa fa-arrow-up"></i></span>
                            </div>
                        </div>
                        <div class="progress mt-1 progress-mt" data-height="8">
                            <div class="progress-bar l-bg-cyan progress-b" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-6">
                <div class="card l-bg-blue-dark">
                    <div class="card-statistic-3 p-4">
                        <div class="card-icon card-icon-large"><i class="fas fa-users"></i></div>
                        <div class="mb-4">
                            <h5 class="card-title mb-0">Quantidade Mín. MDR</h5>
                        </div>
                        <div class="row align-items-center mb-2 d-flex">
                            <div class="col-8">
                                <h2 class="d-flex align-items-center mb-0">
                                    R$ {{numQtdMinMDR}}
                                </h2>
                            </div>
                            <div class="col-4 text-right">
                                <span>9.23% <i class="fa fa-arrow-up"></i></span>
                            </div>
                        </div>
                        <div class="progress mt-1 progress-mt" data-height="8">
                            <div class="progress-bar l-bg-green progress-b" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-6">
                <div class="card l-bg-green-dark">
                    <div class="card-statistic-3 p-4">
                        <div class="card-icon card-icon-large"><i class="fas fa-ticket-alt"></i></div>
                        <div class="mb-4">
                            <h5 class="card-title mb-0">Taxa MDR</h5>
                        </div>
                        <div class="row align-items-center mb-2 d-flex">
                            <div class="col-8">
                                <h2 class="d-flex align-items-center mb-0">
                                    R$ {{numTaxaMDR}}
                                </h2>
                            </div>
                            <div class="col-4 text-right">
                                <span>10% <i class="fa fa-arrow-up"></i></span>
                            </div>
                        </div>
                        <div class="progress mt-1 progress-mt" data-height="8">
                            <div class="progress-bar l-bg-orange progress-b" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-6">
                <div class="card l-bg-orange-dark">
                    <div class="card-statistic-3 p-4">
                        <div class="card-icon card-icon-large"><i class="fas fa-dollar-sign"></i></div>
                        <div class="mb-4">
                            <h5 class="card-title mb-0">Total Líquido</h5>
                        </div>
                        <div class="row align-items-center mb-2 d-flex">
                            <div class="col-8">
                                <h2 class="d-flex align-items-center mb-0">
                                    R$ {{numTotalLiq}}
                                </h2>
                            </div>
                            <div class="col-4 text-right">
                                <span>2.5% <i class="fa fa-arrow-up"></i></span>
                            </div>
                        </div>
                        <div class="progress mt-1 progress-mt" data-height="8">
                            <div class="progress-bar l-bg-cyan progress-b" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="jumbotron container">
    <div class="input-group mb-3">
        <span class="input-group-text"><i class="fas fa-search"></i></span>
        <input type="text" class="form-control" ng-model="criterioBusca" placeholder="Digite aqui um termo desejado" aria-label="Dollar amount (with dot and two decimal places)">
    </div> 
</div>

<div class="jumbotron-no-top table-wrapper-scroll-y my-custom-scrollbar table-responsive container">
    
    <ui-alert title="Ops! ocorreu um problema" ng-show="error" message="error" details="details" ></ui-alert>
   
    <table ng-show="dsTransacoes.length > 0" class="table table-striped table-bordered table-striped mb-0">
        <tr>
            <th><button type="button" class="btn btn-danger button-delete" ng-click="deletarTransacao(dsTransacoes)" ng-disabled="!isTransacaoSelecionada(dsTransacoes)"><i class="fas fa-trash-alt"></i></button></th>
            <th class="th-center"><a href="" ng-click="" class="text-table-th">Detalhes</a></th>
            <th class="th-center"><a href="" ng-click="ordernarPor('date')"  class="text-table-th"><i class="fas fa-sort icon-th"></i>Data</a></th>
            <th class="th-center"><a href="" ng-click="ordernarPor('paymentType')" class="text-table-th"><i class="fas fa-sort icon-th"></i>Tipo de Pagamento</a></th>
            <th class="th-center"><a href="" ng-click="ordernarPor('cardBrand')" class="text-table-th"><i class="fas fa-sort icon-th"></i>Bandeira do Cartão</a></th>
            <th class="th-center"><a href="" ng-click="ordernarPor('netAmount')" class="text-table-th"><i class="fas fa-sort icon-th"></i>Valor Líquido</a></th>
            <th class="th-center"><a href="" ng-click="ordernarPor('channel')" class="text-table-th"><i class="fas fa-sort icon-th"></i>Canal</a></th>
            <th class="th-center"><a href="" ng-click="ordernarPor('minimumMDRAmmount')" class="text-table-th"><i class="fas fa-sort icon-th"></i>Qtd Mín. MDR</a></th>
            <th class="th-center"><a href="" ng-click="ordernarPor('mdrFeeAmount')" class="text-table-th"><i class="fas fa-sort icon-th"></i>taxa MDR</a></th>
            <th class="th-center"><a href="" ng-click="ordernarPor('status')" class="text-table-th"><i class="fas fa-sort icon-th"></i>Status</a></th>
        </tr>
        <tr ng-repeat="trasacao in dsTransacoes | filter:criterioBusca | orderBy:criterioOrdenacao:direcaoOrdenacao">
            <td class="td-center"><input type="checkbox" ng-model="trasacao.selecionado"/></td>
            <td class="td-center"><a href="#/detalheTransacao/{{trasacao.id}}"><i class="fas fa-list-alt icon-th td-detalhes"></i></a></td>
            <td>{{trasacao.date | date:'dd/MM/yyyy HH:mm'}}</td>
            <td>{{trasacao.paymentType}}</td>
            <td>{{trasacao.cardBrand}}</td>
            <td>{{trasacao.netAmount | number:2}}</td>
            <td>{{trasacao.channel}}</td>
            <td>{{trasacao.minimumMDRAmmount | number:2}}</td>
            <td>{{trasacao.mdrFeeAmount | number:2}}</td>
            <td>{{trasacao.status}}</td>
        </tr>
    </table>
</div>

<main class="container jumbotron form-cd">
    <div class="bg-light p-5 rounded">
        <h2>Cadastro Transações</h2>
        <p class="lead">Adicione uma nova transação preenchendo o formulário</p>

        <form name="transacaoForm">
            <input class="form-control form-control-f" type="datetime-local" ng-model="transacao.date" ng-required="true" name="date" placeholder="Data" />
            <select class="form-control form-control-f" ng-model="transacao.paymentType" name="paymentType" ng-options="tipoPagamento.tipo as tipoPagamento.tipo group by tipoPagamento.categoria for tipoPagamento in tiposPagamentos" ng-required="true">
                <option value="">Selecione o Tipo de Pagamento</option>
            </select>
            <select class="form-control form-control-f" ng-model="transacao.cardBrand" name="cardBrand" ng-options="marca for marca in marcasCartao" ng-required="true">
                <option value="">Selecione a Bandeira do Cartão</option>
            </select>
            <input class="form-control form-control-f" type="number" min="1" step="any" ng-model="transacao.netAmount" ng-required="true" name="netAmount" placeholder="Valor Líquido"/>
            <select class="form-control form-control-f" ng-model="transacao.channel" name="channel" ng-options="canal for canal in canaisPagamento" ng-required="true">
                <option value="">Selecione o Canal de Pagamento</option>
            </select>
            <input class="form-control form-control-f" type="number" min="1" step="any" ng-model="transacao.minimumMDRAmmount" ng-required="true" name="minimumMDRAmmount" placeholder="Qtd Mínima de MDR"/>
            <input class="form-control form-control-f" type="number" min="1" step="any" ng-model="transacao.mdrFeeAmount" ng-required="true" name="mdrFeeAmount" placeholder="Valor da taxa de MDR"/>
            <select class="form-control form-control-f" ng-model="transacao.status" name="status" ng-options="statusTra for statusTra in statusTransacao" ng-required="true">
                <option value="">Selecione o Status</option>
            </select>
        </form>

        <div ng-show="transacaoForm.date.$error.required && transacaoForm.date.$dirty" class="alert alert-danger">
            Por favor, selecione uma Data.
        </div>
        <div ng-show="transacaoForm.paymentType.$invalid && transacaoForm.paymentType.$dirty" class="alert alert-danger">
            Por favor, selecione o Tipo de Pagamento.
        </div>
        <div ng-show="transacaoForm.cardBrand.$invalid && transacaoForm.cardBrand.$dirty" class="alert alert-danger">
            Por favor, selecione a bandeira do Cartão
        </div>
        <div ng-show="transacaoForm.netAmount.$invalid && transacaoForm.netAmount.$dirty" class="alert alert-danger">
            Por favor, preencha o campo valor líquido.
        </div>
        <div ng-show="transacaoForm.channel.$invalid && transacaoForm.channel.$dirty" class="alert alert-danger">
            Por favor, preencha o campo Canal
        </div>
        <div ng-show="transacaoForm.minimumMDRAmmount.$invalid && transacaoForm.minimumMDRAmmount.$dirty" class="alert alert-danger">
            Por favor, preencha o campo Qtd Mínima de MDR
        </div>
        <div ng-show="transacaoForm.mdrFeeAmount.$invalid && transacaoForm.mdrFeeAmount.$dirty" class="alert alert-danger">
            Por favor, preencha o campo Valor da taxa de MDR
        </div>
        <div ng-show="transacaoForm.status.$invalid && transacaoForm.status.$dirty" class="alert alert-danger">
            Por favor, preencha o campo Status
        </div>

        <button class="btn btn-primary btn-lg btn-block" ng-click="adicionarTransacao(transacao)" ng-disabled="transacaoForm.$invalid">Adicionar Transação</button>
        </div>

    </div>
    
  </main>

  